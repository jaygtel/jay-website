/* utilities/_a11y.scss
   Purpose: accessibility helpers
   - Visible focus states for keyboard users
   - Respect prefers-reduced-motion
   - Screen-reader-only utility
   - Skip-link that appears on keyboard focus
*/

@use "../abstracts/mixins" as *;

/* 1) Visible focus (keyboard users) */
:focus-visible {
  @include focus-ring(3px);
}

/* Common controls: buttons, links, form fields */
a:focus-visible,
button:focus-visible,
[role="button"]:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  @include focus-ring(3px);
}

/* 2) Reduced motion — respect user preference */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}

/* 3) Visually hidden but still accessible to screen readers */
.visually-hidden {
  position: absolute !important;
  width: 1px;
  height: 1px;
  margin: -1px;
  border: 0;
  padding: 0;
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  overflow: hidden;
  white-space: nowrap;
}

/* 4) Skip link — hidden off-screen until focused */
.skip-link {
  position: absolute;
  top: 0;
  left: 0;
  transform: translateY(-150%);
  /* keep it off-screen by default */
  padding: 0.5rem 0.75rem;
  background: CanvasText;
  /* auto-contrasting system colors */
  color: Canvas;
  text-decoration: none;
  border-radius: 0.25rem;
  z-index: 1000;
  /* ensure it sits above header */
}

.skip-link:focus,
.skip-link:focus-visible {
  transform: none;
  /* reveal when focused via keyboard */
}